---
- name: Raw-install Python3
  raw: pacman --noconfirm -S python3 python-pip
  become: true

- name: Docker install
  become: true
  pacman:
    name: "{{ item }}"
    state: present
    update_cache: true
  loop:
    - docker
    - docker-compose

- name: Python packages for Docker
  become: true
  raw: "pip install {{ item }}"
  loop:
    - "setuptools>=65.6.0"
    - "docker>=6.0.0"
    - "docker-compose>=1.29.2"
    - "PyYAML>=5.4.0"

- name: Enable systemd service
  become: true
  ansible.builtin.systemd:
    enabled: true
    name: docker

- name: Start systemd service
  become: true
  ansible.builtin.systemd:
    state: started
    name: docker

- name: Install NFS client
  become: true
  pacman:
    name: nfs-utils
    state: present
